// 情绪识别和回应数据
const emotionsData = {
    // 悲伤情绪
    sad: {
        name: "悲伤",
        emoji: "😢",
        color: "#4dabf7",
        keywords: ["难过", "伤心", "悲伤", "哭泣", "抑郁", "想哭", "不开心", "低落", "失望", "失落"],
        responses: [
            "我能感受到你现在的难过，愿意和我聊聊发生了什么吗？",
            "难过的时候确实很难受，但请记住这些感受都是暂时的",
            "我在这里倾听你，你并不孤单",
            "有时候哭泣也是释放情绪的好方式",
            "你的感受很重要，值得被认真对待",
            "很多人都有过这样的时刻，你不是一个人",
            "想哭就哭出来吧，释放情绪是健康的",
            "我们可以一起慢慢度过这个艰难的时刻"
        ]
    },
    
    // 焦虑情绪
    anxious: {
        name: "焦虑",
        emoji: "😰",
        color: "#ffa94d",
        keywords: ["焦虑", "紧张", "担心", "害怕", "恐慌", "不安", "心慌", "烦躁", "压力", "担忧"],
        responses: [
            "焦虑的时候确实很难受，让我们一起深呼吸好吗？",
            "试着把大问题分解成小步骤，一步一步来",
            "你比想象中要坚强，已经克服了很多困难",
            "专注于当下，不要为未来过度担忧",
            "焦虑是提醒我们需要关注某些事情，但不是全部",
            "我们可以一起梳理让你焦虑的事情",
            "试着做几个深呼吸，让自己平静下来",
            "担心未来很正常，但别让它占据你的现在"
        ]
    },
    
    // 愤怒情绪
    angry: {
        name: "愤怒",
        emoji: "😠",
        color: "#ff6b6b",
        keywords: ["生气", "愤怒", "恼火", "烦躁", "气愤", "发火", "不爽", "怒火", "暴怒", "讨厌"],
        responses: [
            "愤怒是正常的情绪，但不要让控制你",
            "试着深呼吸，给自己一点空间冷静下来",
            "我们可以一起分析是什么让你感到愤怒",
            "把感受说出来会让愤怒的情绪缓解一些",
            "愤怒背后往往藏着未被满足的需求",
            "生气是告诉我们有些事情需要改变",
            "给自己一些时间冷静，情绪会慢慢平复",
            "我们可以找到更好的方式表达愤怒"
        ]
    },
    
    // 快乐情绪
    happy: {
        name: "快乐",
        emoji: "😊",
        color: "#69db7c",
        keywords: ["开心", "高兴", "快乐", "幸福", "兴奋", "愉快", "喜悦", "欢乐", "美好", "满足"],
        responses: [
            "真为你感到高兴！愿意分享这份快乐吗？",
            "美好的时刻值得好好珍惜和回味",
            "你的快乐也感染了我，谢谢你的分享",
            "继续保持这种积极的心态！",
            "快乐的时候，整个世界都变得更美好了",
            "把这份快乐记在心里，不开心的时候可以回想",
            "你的快乐是应得的，好好享受这一刻",
            "看到你开心，我也感到很高兴"
        ]
    },
    
    // 困惑情绪
    confused: {
        name: "困惑",
        emoji: "😕",
        color: "#9775fa",
        keywords: ["迷茫", "困惑", "不知道", "怎么办", "选择", "犹豫", "纠结", "疑惑", "不懂", "不清楚"],
        responses: [
            "迷茫的时候确实很困惑，我们可以一起理清思路",
            "试着把问题写下来，可能会更清晰",
            "有时候放慢脚步，给自己一些思考的时间",
            "你并不需要立即找到所有答案",
            "困惑是成长的开始，说明你在思考重要的事情",
            "我们可以把问题分解，一步步分析",
            "每个人都有迷茫的时候，这很正常",
            "不要急于做决定，给自己足够的思考空间"
        ]
    },
    
    // 孤独情绪
    lonely: {
        name: "孤独",
        emoji: "😔",
        color: "#74c0fc",
        keywords: ["孤独", "孤单", "寂寞", "一个人", "没人懂", "被冷落", "孤立", "不合群", "独处"],
        responses: [
            "孤独的时候确实很难受，但请记住很多人都关心你",
            "愿意和我聊聊你的感受吗？我在这里倾听",
            "孤独是人类共同的体验，你并不特别",
            "有时候孤独也是认识自己的好机会",
            "我在这里陪伴你，你不是一个人",
            "孤独感会过去，联系那些你在乎的人",
            "可以试着培养一些兴趣爱好，充实自己",
            "每个人的内心都有孤独的时刻，这是正常的"
        ]
    },
    
    // 疲惫情绪
    tired: {
        name: "疲惫",
        emoji: "😴",
        color: "#868e96",
        keywords: ["累", "疲惫", "困", "疲倦", "无力", "没精神", "想睡", "筋疲力尽", "耗竭"],
        responses: [
            "听起来你很累了，要不要先休息一下？",
            "身体在告诉你需要放松和恢复",
            "给自己一些休息的时间，不要勉强",
            "疲惫的时候，放慢脚步是明智的选择",
            "好好休息，明天又是新的一天",
            "照顾好自己的身体是最重要的",
            "可以试试做一些放松的活动",
            "休息是为了走更长远的路"
        ]
    },
    
    // 一般回应（当无法识别特定情绪时）
    general: {
        name: "一般",
        emoji: "😐",
        color: "#adb5bd",
        keywords: [],
        responses: [
            "我理解你的感受",
            "你做得已经很好了",
            "每个人都会有这样的时刻",
            "相信你自己，你有能力面对",
            "我在这里支持你",
            "谢谢你的分享，我在认真倾听",
            "你的感受很重要，值得被重视",
            "我们可以一起慢慢处理这些感受",
            "你并不孤单，我会一直在这里",
            "生活有起伏很正常，重要的是我们如何应对"
        ]
    }
};

// 分析用户输入的情绪
function analyzeEmotion(input) {
    const lowerInput = input.toLowerCase();
    
    // 遍历所有情绪类型
    for (const [emotion, data] of Object.entries(emotionsData)) {
        if (emotion === 'general') continue;
        
        // 检查关键词
        for (const keyword of data.keywords) {
            if (lowerInput.includes(keyword)) {
                return emotion;
            }
        }
    }
    
    return 'general';
}

// 获取情绪回应
function getEmotionResponse(emotion) {
    const data = emotionsData[emotion] || emotionsData.general;
    const responses = data.responses;
    
    // 随机选择一个回应
    const randomIndex = Math.floor(Math.random() * responses.length);
    return responses[randomIndex];
}

// 获取情绪信息
function getEmotionInfo(emotion) {
    return emotionsData[emotion] || emotionsData.general;
}